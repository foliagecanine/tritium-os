#include "draw.h"

uint64_t font_table[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // first 16 are just extra codes (nonprintable)
                         0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // next 16 are too
                         0x0000000000000000,                             //' ' char
                         0x1010101010001000,                             //'!'
                         0x1414000000000000,                             // See ascii reference for more (this one is value 34)
                         0x00143E14143E1400,                             // These are raw binary encoded
                         0x103C503814781000,
                         0x7152740817254700, // as shown for this one (37='%') see below
                         0x1C24182542463900,
						 0x0808000000000000,
                         0x0408101010080400, // 0 1 1 1 0 0 0 1 = 0x71
                         0x1008040404081000, // 0 1 0 1 0 0 1 0 = 0x52
                                             // 0 1 1 1 0 1 0 0 = 0x74
                                             // 0 0 0 0 1 0 0 0 = 0x08
                                             // 0 0 0 1 0 1 1 1 = 0x17
                                             // 0 0 1 0 0 1 0 1 = 0x25
                                             // 0 1 0 0 0 1 1 1 = 0x47
                                             // 0 0 0 0 0 0 0 0 = 0x00

                         // When printed it should look like this:
                         0x0000140814000000, //   # # #       #
                         0x0008083E08080000, //   #   #     #
                         0x0000000000081000, //   # # #   #
                         0x0000003E00000000, //         #
                         0x0000000000000800, //       #   # # #
                         0x0102040810204000, //     #     #   #
                         0x3844445444443800, //   #       # # #
                         0x0818080808081C00, //
                         0x3C42040810207E00, // The leftmost and bottommost sides are all 0's for spacing
                         0x3C42021C02423C00,
						 0x0C14247C04040400,
                         0x7E40407C02423C00, // Font made with scratch program at https://scratch.mit.edu/projects/298710977/
                         0x3844407844443800, 0x7E02040810204000, 0x3844443844443800, 0x3844443C04443800, 0x0000200000200000, 0x0000200000202000, 0x030C3040300C0300, 0x00003E00003E0000, 0x6018060106186000, 0x3844040810001000, 0x3E41474947403E00, 0x102844447C444400, 0x7844447844447800, 0x3844404040443800, 0x7048444444487000, 0x7C40407840407C00, 0x7C40407840404000, 0x3C4240404E423C00, 0x4444447C44444400, 0x7C10101010107C00, 0x7C04040404443800, 0x4448506050484400, 0x4040404040407C00, 0x4163554941414100, 0x4161514945434100, 0x3C42424242423C00, 0x7844447840404000, 0x3C42424242443A00, 0x7844447844444400, 0x3844403804443800, 0x7F08080808080800, 0x4444444444443800, 0x4444444444281000, 0x4141414149552200, 0x4122140814224100, 0x4444281010101000, 0x7F02040810207F00, 0x1C10101010101C00, 0x4020100804020100, 0x1C04040404041C00, 0x0814220000000000, 0x0000000000007F00, 0x1010080000000000, 0x0000700838483400, 0x4040407048487000, 0x0000003040403000, 0x0808083848483800, 0x0000304878403800, 0x3048407040404000, 0x0000384838087000, 0x4040407048484800, 0x0010001010101000, 0x0008000808483000, 0x4040485060504800, 0x6020202020202000, 0x000000446C545400, 0x0000004070484800, 0x0000003048483000, 0x0000704870404000, 0x0000384838080C00, 0x0000007048404000, 0x0000384078087000, 0x0020702020201000, 0x0000004848483000, 0x0000004444281000, 0x0000004444542800, 0x0000442810284400, 0x0000484838087000, 0x0000007810207800, 0x0C10102010100C00, 0x0808080808080800, 0x1804040204041800, 0x324C000000000000};

void rect(uint32_t x, uint32_t y, uint32_t w, uint32_t h, color_t c) {
	for (uint32_t _y = y; _y < y + h; _y++) {
		for (uint32_t _x = x; _x < x + w; _x++) {
			setpixel_a(_x, _y, c);
		}
	}
}

void draw_char(uint32_t x, uint32_t y, char c, color_t back_color, color_t front_color) {
	uint8_t *charval = (uint8_t *)&font_table[(uint8_t)c];
	for (uint8_t _y = 0; _y < 8; _y++) {
		for (uint8_t _x = 0; _x < 8; _x++) {
			setpixel_a(x + _x, y + _y, (charval[7 - (_y)] >> (7 - (_x))) & 1 ? front_color : back_color);
		}
	}
}

void draw_str(uint32_t x, uint32_t y, char *str, color_t back_color, color_t front_color) {
	char *cstr = str;
	while (*cstr) {
		draw_char(x, y, *cstr++, back_color, front_color);
		x += 8;
	}
}
